(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc683032"],{"11b0":function(e,r,s){e.exports=s.p+"img/shield-tick-white.4d52492e.svg"},"1da4":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("div",{staticClass:"profile"},[t("div",{staticClass:"login"},[t("span",{staticClass:"title"},[e._v("Profilni tahrirlash")]),t("div",{staticClass:"image_box"},[t("img",{staticClass:"person_image",attrs:{src:e.one_user.image?e.baseURL+"/public/images/"+e.one_user.image:s("db8c"),alt:"person_image"},on:{click:function(r){return e.$refs.fileInput.click()}}}),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onFileSelected}})]),t("ValidationObserver",{ref:"formProfileChange",scopedSlots:e._u([{key:"default",fn:function(r){var a=r.handleSubmit,n=r.invalid;return[t("form",{on:{submit:function(r){return r.preventDefault(),a(e.onSubmit1)}}},[t("div",{staticClass:"mt-5"},[t("span",{staticClass:"text-black ml-1"},[e._v("Login")]),t("ValidationProvider",{attrs:{rules:{required:!0,error:[e.errorStatus,e.errorMessage,e.errorPlace,"email"]}},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("v-text-field",{staticClass:"mt-2",attrs:{outlined:"","error-messages":s,placeholder:"Misol: 182455"},model:{value:e.profile.login,callback:function(r){e.$set(e.profile,"login",r)},expression:"profile.login"}})]}}],null,!0)})],1),t("div",[t("span",{staticClass:"text-black ml-1"},[e._v("Ism Sharif")]),t("ValidationProvider",{attrs:{rules:{required:!0,error:[e.errorStatus,e.errorMessage,e.errorPlace,"name"]}},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("v-text-field",{staticClass:"mt-2",attrs:{outlined:"","error-messages":s,placeholder:"Misol: 182455"},model:{value:e.profile.fullname,callback:function(r){e.$set(e.profile,"fullname",r)},expression:"profile.fullname"}})]}}],null,!0)})],1),t("div",{staticClass:"d-flex justify-space-between"},[t("v-btn",{staticClass:"primaryBtn btn",attrs:{elevation:"0",loading:e.loading,type:"submit",disabled:n},on:{click:function(r){e.loader="loading"}}},[t("img",{attrs:{src:s("11b0"),alt:"shield-tick-white",width:"22"}}),t("span",{staticClass:"ml-1 fs-16px"},[e._v("Saqlash")])])],1)])]}}])})],1),t("div",{staticClass:"password"},[t("span",{staticClass:"title"},[e._v("Parolni o`zgartirish")]),t("ValidationObserver",{ref:"formProfilePasswordChange",scopedSlots:e._u([{key:"default",fn:function(r){var a=r.handleSubmit,n=r.invalid;return[t("form",{on:{submit:function(r){return r.preventDefault(),a(e.onSubmit2)}}},[t("div",{staticClass:"mt-4"},[t("span",{staticClass:"text-black ml-1  "},[e._v("Joriy parol")]),t("ValidationProvider",{attrs:{rules:{required:!0,error:[e.errorStatus,e.errorMessage,e.errorPlace,"password"]}},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("v-text-field",{staticClass:"mt-2",attrs:{outlined:"",maxlength:"12","append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",counter:"","error-messages":s},on:{"click:append":function(r){e.show1=!e.show1}},model:{value:e.password.current,callback:function(r){e.$set(e.password,"current",r)},expression:"password.current"}})]}}],null,!0)})],1),t("div",[t("span",{staticClass:"text-black ml-1"},[e._v("Yangi parol")]),t("ValidationProvider",{attrs:{rules:{required:!0,error:[e.errorStatus,e.errorMessage,e.errorPlace,"new_password"]}},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("v-text-field",{staticClass:"mt-2",attrs:{"error-messages":s,maxlength:"12","append-icon":e.show2?"mdi-eye":"mdi-eye-off",type:e.show2?"text":"password",counter:"",min:"1",outlined:""},on:{"click:append":function(r){e.show2=!e.show2}},model:{value:e.password.new,callback:function(r){e.$set(e.password,"new",r)},expression:"password.new"}})]}}],null,!0)})],1),t("div",[t("span",{staticClass:"text-black ml-1"},[e._v("Yangi parol(tasdiqlash)")]),t("ValidationProvider",{attrs:{rules:{required:!0,error:[e.errorStatus,e.errorMessage,e.errorPlace,"new_password_confirm"]}},scopedSlots:e._u([{key:"default",fn:function(r){var s=r.errors;return[t("v-text-field",{staticClass:"mt-2",attrs:{"error-messages":s,maxlength:"12","append-icon":e.show3?"mdi-eye":"mdi-eye-off",type:e.show3?"text":"password",counter:"",min:"1",outlined:""},on:{"click:append":function(r){e.show3=!e.show3}},model:{value:e.password.confirm_new,callback:function(r){e.$set(e.password,"confirm_new",r)},expression:"password.confirm_new"}})]}}],null,!0)})],1),t("div",{staticClass:"d-flex justify-start"},[t("v-btn",{staticClass:"primaryBtn btn",attrs:{elevation:"0",loading:e.loading,type:"submit",disabled:n},on:{click:function(r){e.loader="loading"}}},[t("img",{attrs:{src:s("11b0"),alt:"shield-tick-white",width:"22"}}),t("span",{staticClass:"ml-1 fs-16px"},[e._v("Saqlash")])])],1)])]}}])})],1)])])},a=[],n=s("5530"),o=s("1da1"),i=(s("b0c0"),s("96cf"),s("2f62")),l=s("bbf1"),c=s("3a99"),u={props:[""],mixins:[l["b"]],components:{},data:function(){return{baseURL:"",profile:{photo:"",login:"",fullname:""},password:{current:"",new:"",confirm_new:""},selectedFile:null,show1:!1,show2:!1,show3:!1,errorStatus:!1,errorMessage:"",errorPlace:""}},watch:{profile:{handler:function(e){e&&this.clearErrors()},deep:!0},password:{handler:function(e){e&&this.clearErrors()},deep:!0},selectedFile:function(e,r){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e){r.next=3;break}return r.next=3,s.onUpload();case 3:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.refresh();case 2:e.baseURL=c["a"];case 3:case"end":return r.stop()}}),r)})))()},computed:Object(n["a"])({},Object(i["d"])({user:function(e){return e.main.user},one_user:function(e){return e.main.one_user}})),methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])({updateUserLogin:"main/updateUserLogin",updateUserPassword:"main/updateUserPassword",updateUserPhoto:"main/updateUserPhoto",fetchOneUser:"main/fetchOneUser"})),{},{onFileSelected:function(e){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:r.selectedFile=e.target.files[0];case 1:case"end":return s.stop()}}),s)})))()},onUpload:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var s,t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=new FormData,s.append("image",e.selectedFile,e.selectedFile.name),r.next=4,e.updateUserPhoto({id:e.one_user.id,image:s});case 4:if(t=r.sent,!t.response||422!=t.response.status){r.next=11;break}t.response.data.errors.image&&(e.errorMessage=t.response.data.errors.image[0],e.errorPlace="image"),e.errorStatus=!0,e.$toast.error(e.errorMessage),r.next=20;break;case 11:if(!t.response||409!=t.response.status){r.next=16;break}t.response.data.message&&(e.errorMessage=t.response.data.message),e.$toast.error(e.errorMessage),r.next=20;break;case 16:return r.next=18,e.refresh();case 18:e.$toast.success("Muvaffaqiyatli qo`shildi!"),e.closeModal();case 20:case"end":return r.stop()}}),r)})))()},refresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loading=!0,r.next=3,e.fetchOneUser(e.user.user_id);case 3:e.profile.photo=e.one_user.image,e.profile.login=e.one_user.email,e.profile.fullname=e.one_user.name,e.loading=!1;case 7:case"end":return r.stop()}}),r)})))()},clearInputs:function(){this.clearErrors()},clearErrors:function(){this.errorStatus=!1,this.errorMessage="",this.errorPlace=""},closeModal:function(){this.clearInputs(),console.log(this.$parent.ipAddDialog),this.$parent.ipAddDialog=!1,this.$refs.formIpAdd.reset()},onSubmit1:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$refs.formProfileChange.validate().then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(s){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!s){r.next=21;break}return r.next=3,e.updateUserLogin({id:e.one_user.id,name:e.profile.fullname,email:e.profile.login});case 3:if(t=r.sent,!t.response||422!=t.response.status){r.next=10;break}t.response.data.errors.name?(e.errorMessage=t.response.data.errors.name[0],e.errorPlace="name"):t.response.data.errors.password&&(e.errorMessage=t.response.data.errors.password[0],e.errorPlace="password"),e.errorStatus=!0,e.$toast.error(e.errorMessage),r.next=19;break;case 10:if(!t.response||409!=t.response.status){r.next=15;break}t.response.data.message&&(e.errorMessage=t.response.data.message),e.$toast.error(e.errorMessage),r.next=19;break;case 15:return r.next=17,e.refresh();case 17:e.$toast.success("Muvaffaqiyatli qo`shildi!"),e.closeModal();case 19:r.next=22;break;case 21:e.$toast.error("Xato yuz berdi!");case 22:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},onSubmit2:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$refs.formProfilePasswordChange.validate().then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(s){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!s){r.next=28;break}if(e.password.new==e.password.confirm_new){r.next=8;break}e.errorMessage="Parollar bir biriga mos kelmayapti!",e.errorPlace="new_password_confirm",e.errorStatus=!0,e.$toast.error(e.errorMessage),r.next=26;break;case 8:return r.next=10,e.updateUserPassword({id:e.one_user.id,old_password:e.password.current,password:e.password.new});case 10:if(t=r.sent,!t.response||422!=t.response.status){r.next=17;break}t.response.data.errors.name?(e.errorMessage=t.response.data.errors.name[0],e.errorPlace="name"):t.response.data.errors.password&&(e.errorMessage=t.response.data.errors.password[0],e.errorPlace="password"),e.errorStatus=!0,e.$toast.error(e.errorMessage),r.next=26;break;case 17:if(!t.response||409!=t.response.status){r.next=22;break}t.response.data.message&&(e.errorMessage=t.response.data.message),e.$toast.error(e.errorMessage),r.next=26;break;case 22:return r.next=24,e.refresh();case 24:e.$toast.success("Muvaffaqiyatli qo`shildi!"),e.closeModal();case 26:r.next=29;break;case 28:e.$toast.error("Xato yuz berdi!");case 29:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}})},d=u,p=s("2877"),f=s("6544"),m=s.n(f),g=s("8336"),w=s("8654"),h=Object(p["a"])(d,t,a,!1,null,null,null);r["default"]=h.exports;m()(h,{VBtn:g["a"],VTextField:w["a"]})},db8c:function(e,r,s){e.exports=s.p+"img/profile-picture.6f6f20e6.jpg"}}]);
//# sourceMappingURL=chunk-bc683032.0aafa3ed.js.map